!function(){var e=pc.Application.getApplication().assets.find("firebase-setup.js"),t=document.createElement("script");t.setAttribute("type","module"),t.setAttribute("src",e.getFileUrl()),document.head.appendChild(t)}();var Fbcontroller=pc.createScript("fbcontroller");Fbcontroller.attributes.add("Images",{type:"entity",array:!0}),Fbcontroller.prototype.initialize=function(){Fbcontroller.Instance=this,setTimeout((()=>{this.onBtn()}),"1000")},Fbcontroller.prototype.onBtn=function(){window.consoleName()},Fbcontroller.prototype.loadFromUrl=function(t,o){this.app.assets.loadFromUrl(o,"texture",(function(o,e){var r=e.resource;Fbcontroller.Instance.Images[t].element.texture=r}))};var PlayerMovement=pc.createScript("playerMovement"),forceX=0,forceZ=0;PlayerMovement.attributes.add("playermodel",{type:"entity"}),PlayerMovement.attributes.add("touchControl",{type:"entity"}),PlayerMovement.attributes.add("keyBoardUI",{type:"entity"}),PlayerMovement.attributes.add("speed",{type:"number",title:"Player Speed",default:1});var goRight=!1;PlayerMovement.prototype.initialize=function(){pc.platform.touch?(this.playermodel.script.playerMovement.enabled=!1,this.playermodel.script.playerMovement.enabled=!0):(this.playermodel.script.playerMovement.enabled=!1,this.playermodel.script.firstPersonMovement.enabled=!0);PlayerMovement.Instance=this,console.log(this.entity.getRotation()),this.force=new pc.Vec3,this.right=new pc.Vec3,this.playerSpeed=5,this.halfSpeed=this.playerSpeed/2,this.originalPlayerSpeed=this.playerSpeed,this.ObliqueMovement=!0,this.w=0,this.a=0,this.s=0,this.d=0,this.on("destroy",(function(){}),this),this.isfall=!1},PlayerMovement.prototype.update=function(t){this.entity.getPosition().y<2.87&&(this.isfall=!0,setTimeout(function(){this.Reset()}.bind(this),200)),!0===goRight&&this.entity.rigidbody.applyImpulse(0,5e3,0),!0===goRight&&this.moving&&this.entity.rigidbody.applyImpulse(0,5e3,0),this.moving?(console.log("log is here"),this.angle=180*(Math.PI+Math.atan2(2*-this.forceX,2*this.forceY))/Math.PI,console.log("angle ",this.angle),this.playerPosition=this.entity.getLocalPosition(),this.Move(2*this.forceX,2*this.forceY),this.entity.rigidbody.teleport(this.playerPosition.x,this.playerPosition.y,this.playerPosition.z,0,this.angle+180,0)):this.moving},PlayerMovement.prototype.SetMovingTo=function(t){this.moving=!!t},PlayerMovement.prototype.Move=function(t,e){var i=this.playermodel;console.log(i.forward);var o=this.force.copy(i.forward).scale(7*this.speed);this.entity.rigidbody.linearVelocity=o},PlayerMovement.prototype.Reset=function(){this.isfall=!1,this.entity.rigidbody.teleport(this.originalPos,new pc.Vec3(0,0,0)),this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO},PlayerMovement.prototype.StopMovement=function(){var t=this.entity.rigidbody.linearVelocity;t.set(0,t.y,0),this.entity.rigidbody.linearVelocity=t},PlayerMovement.prototype.onRightStart=function(t){goRight=!0},PlayerMovement.prototype.onRightEnd=function(t){goRight=!1};var scope,Trigger=pc.createScript("trigger");Trigger.prototype.initialize=function(){Trigger.Instance=this,this.entity.collision.on("triggerenter",this.onTriggerEnter,this),this.entity.collision.on("triggerleave",this.onTriggerLeave,this),this.triggerState=!1,scope=this},Trigger.prototype.onTriggerEnter=function(){this.app.mouse.disablePointerLock(),window.getDataEvent(this.entity.name),console.log(Animate.Instance.object),scope.string="http://127.0.0.1:5500/ArteFacto/customer/eventDescription.html?eventId="+Animate.Instance.object.eventId,Animate.Instance.description.element.text=Animate.Instance.object.longDescription,Animate.Instance.animateUI(new pc.Vec3(1,1,1))},Trigger.prototype.onTriggerLeave=function(){Animate.Instance.animateUI(new pc.Vec3(0,0,0))},Trigger.prototype.update=function(){};class Animate extends pc.ScriptType{static addAttributes(){this.attributes.add("description",{type:"entity"}),this.attributes.add("screen",{type:"entity"}),this.attributes.add("clickBtn",{type:"entity"})}initialize(){Animate.Instance=this,this.object,this.link,this.clickBtn.button.on("click",this.openLink,this),setTimeout((()=>{this.buttonCheck()}),"5000")}openLink(){console.log(scope.string),window.open(scope.string)}buttonCheck(){this.fetchAndLoadData()}animateUI(t){this.screen.tween(this.screen.getLocalScale()).to(new pc.Vec3(t.x,t.y,t.z),.8,pc.BackOut).loop(!1).yoyo(!0).start()}async fetchAndLoadData(){for(var t=0;t<8;t++)try{const e=await getDataEvent(t);console.log(e),Animate.Instance.object=e,console.log(Animate.Instance.object.eventPicture),Fbcontroller.Instance.loadFromUrl(t,Animate.Instance.object.eventPicture),console.log(Animate.Instance.object.eventPicture)}catch(t){console.error("Error fetching and loading data:",t)}}}pc.registerScript(Animate,"animate"),Animate.addAttributes();class LinksManager extends pc.ScriptType{static addAttributes(){}initialize(){console.log("Initialize"),LinksManager.Instance=this}}pc.registerScript(LinksManager,"linksManager"),LinksManager.addAttributes();var UiElement=pc.createScript("uiElement");UiElement.attributes.add("playEvent",{title:"Play Event",description:"Set the TV screen material emissive map on this event.",type:"string",default:""}),UiElement.prototype.initialize=function(){this.on("destroy",this.onDestroy,this),UiElement.Instance=this,this.initialVideo()},UiElement.prototype.initialVideo=function(){this.app.on(this.playEvent,(function(t){this.entity.element.texture=t}),this)},UiElement.prototype.onDestroy=function(){this.app.off(this.playEvent)};var VideoTexture=pc.createScript("videoTexture");VideoTexture.attributes.add("video",{title:"Video",description:"MP4 video asset to play back on this video texture.",type:"asset"}),VideoTexture.attributes.add("playEvent",{title:"Play Event",description:"Event that is fired as soon as the video texture is ready to play.",type:"string",default:""}),VideoTexture.prototype.initialize=function(){VideoTexture.Instance=this,this.videoplay()},VideoTexture.prototype.update=function(e){this.videoTexture.upload()},VideoTexture.prototype.videoplay=function(e){var t=this.app,i=document.createElement("video");i.autoplay=!0,i.crossOrigin="anonymous",i.loop=!0,i.muted=!0,i.playsInline=!0,i.src=this.video.getFileUrl();var o=i.style;o.width="1px",o.height="1px",o.position="absolute",o.opacity="0",o.zIndex="-1000",o.pointerEvents="none",document.body.appendChild(i),this.videoTexture=new pc.Texture(t.graphicsDevice,{format:pc.PIXELFORMAT_R8_G8_B8,minFilter:pc.FILTER_LINEAR_MIPMAP_LINEAR,magFilter:pc.FILTER_LINEAR,addressU:pc.ADDRESS_CLAMP_TO_EDGE,addressV:pc.ADDRESS_CLAMP_TO_EDGE,mipmaps:!0,autoMipmap:!0}),this.videoTexture.setSource(i),i.addEventListener("canplay",function(e){this.app.fire(this.playEvent,this.videoTexture)}.bind(this))};pc.script.createLoadingScreen((function(e){var t,a;t=["body {","    background-color: #283538;","}","","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #283538;","}","","#application-splash {","    position: absolute;","    top: calc(50% - 28px);","    width: 264px;","    left: calc(50% - 132px);","}","","#application-splash img {","    width: 100%;","}","","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 2px;","    width: 100%;","    background-color: #1d292c;","}","","#progress-bar {","    width: 0%;","    height: 100%;","    background-color: #f60;","}","","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),document.head.appendChild(a),function(){var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var t=document.createElement("div");t.id="application-splash",e.appendChild(t),t.style.display="none";var a=document.createElement("img");a.src="https://i.ibb.co/4NwTpxw/logo.png",t.appendChild(a),a.onload=function(){t.style.display="block"};var o=document.createElement("div");o.id="progress-bar-container",t.appendChild(o);var p=document.createElement("div");p.id="progress-bar",o.appendChild(p)}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var t=document.getElementById("progress-bar");t&&(e=Math.min(1,Math.max(0,e)),t.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));var ShapeWorld=pc.createScript("shapeWorld");ShapeWorld.prototype.initialize=function(){this._pickableEntities=[],this._pickableShapes=[],this.app.on("shapeworld:add",this.addItem,this),this.app.on("shapeworld:remove",this.removeItem,this),this.app.shapeWorld=this},ShapeWorld.hitPoint=new pc.Vec3,ShapeWorld.vecBetween=new pc.Vec3,ShapeWorld.prototype.raycast=function(e,t,i,p){for(var a=ShapeWorld.hitPoint,s=(ShapeWorld.vecBetween,p||1/0),h=null,n=0;n<this._pickableShapes.length;++n){var r=this._pickableShapes[n],o=this._pickableEntities[n];if((!t||t(o)&&o.enabled)&&r.intersectsRay(e,a)){var l=e.origin.distance(a);l<s&&(s=l,h=o,i&&i.copy(a))}}return h},ShapeWorld.prototype.containsPoint=function(e,t){for(var i=null,p=0;p<this._pickableShapes.length;++p){var a=this._pickableShapes[p],s=this._pickableEntities[p];if((!t||t(s)&&s.enabled)&&a.containsPoint(e)){i=s;break}}return i},ShapeWorld.prototype.intersectsSphere=function(e,t){for(var i=null,p=0;p<this._pickableShapes.length;++p){var a=this._pickableShapes[p],s=this._pickableEntities[p];if((!t||t(s)&&s.enabled)&&a.intersectsBoundingSphere(e)){i=s;break}}return i},ShapeWorld.prototype.addItem=function(e,t){e&&(this._pickableEntities.push(e),this._pickableShapes.push(t))},ShapeWorld.prototype.removeItem=function(e){var t=this._items.indexOf(e);t>=0&&(this._pickableEntities.splice(t,1),this._pickableShapes.splice(t,1))};var TouchTester=pc.createScript("touchTester");TouchTester.attributes.add("box",{type:"entity",title:"Box"}),TouchTester.prototype.initialize=function(){this.entity.element.on("mousedown",this.onPress,this),this.entity.element.on("touchstart",this.onPress,this)},TouchTester.prototype.update=function(t){},TouchTester.prototype.onPress=function(t){console.log("Box!"),this.box.translate(0,.1,0)};var TouchInput=pc.createScript("touchInput");TouchInput.attributes.add("lookSensitivity",{type:"number",default:.75}),TouchInput.attributes.add("moveSensitivity",{type:"number",default:.1}),TouchInput.prototype.initialize=function(){var t=this.app.touch;t&&(t.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),t.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),t.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this),t.on(pc.EVENT_TOUCHCANCEL,this.onTouchCancel,this)),this.previousDelta=new pc.Vec2,this.force=new pc.Vec2},TouchInput.prototype.update=function(t){this.app.touch&&(this.app.fire("input:addForwardForce",-this.force.y),this.app.fire("input:addLateralForce",this.force.x))},TouchInput.prototype.onTouchStart=function(t){for(var o=t.changedTouches,i=0;i<o.length;i+=1){this.canvasSize=new pc.Vec2(window.innerWidth,window.innerHeight);var h=new pc.Vec2(o[i].x,o[i].y);h.x<=this.canvasSize.x/2?(this.leftTouchID=o[i].id,this.leftTouchStart=h):(this.rightTouchID=o[i].id,this.rightTouchStart=h)}},TouchInput.prototype.onTouchMove=function(t){for(var o=t.changedTouches,i=0;i<o.length;i+=1){var h=new pc.Vec2(o[i].x,o[i].y);if(o[i].id===this.leftTouchID&&(h.sub(this.leftTouchStart),this.force=h.scale(this.moveSensitivity)),o[i].id===this.rightTouchID){var e=new pc.Vec2;e.sub2(h,this.rightTouchStart),this.rightTouchStart=h,e.scale(this.lookSensitivity),this.app.fire("input:setLookDelta",e)}}},TouchInput.prototype.onTouchEnd=function(t){for(var o=t.changedTouches,i=0;i<o.length;i+=1)this.removeTouchWorldPosition(o[i])},TouchInput.prototype.onTouchCancel=function(t){for(var o=t.changedTouches,i=0;i<o.length;i+=1)this.removeTouchWorldPosition(o[i])},TouchInput.prototype.removeTouchWorldPosition=function(t){t.id===this.leftTouchID&&(this.leftTouchID=null,this.leftTouchStart.set(0,0),this.force.set(0,0)),t.id===this.rightTouchID&&(this.rightTouchID=null,this.rightTouchStart.set(0,0))};var PlayerController=pc.createScript("playerController");PlayerController.attributes.add("camera",{type:"entity",description:"Player Camera"}),PlayerController.prototype.initialize=function(){this.eulers=new pc.Vec3,this.checkRequiredComponents(),this.app.on("input:setLookDelta",this.setLookDelta,this),this.app.on("input:addForwardForce",this.addForwardForce,this),this.app.on("input:addLateralForce",this.addLateralForce,this)},PlayerController.prototype.update=function(e){},PlayerController.prototype.checkRequiredComponents=function(){this.entity.collision||console.error("Player Controller needs to have a 'collision' component"),this.entity.rigidbody&&this.entity.rigidbody.type===pc.BODYTYPE_DYNAMIC||console.error("Player Controller needs to have a DYNAMIC 'rigidbody' component"),this.camera||console.error("Player Controller needs to reference a camera component")},PlayerController.prototype.setLookDelta=function(e){this.eulers.x-=e.x,this.eulers.y-=e.y,this.camera.setLocalEulerAngles(this.eulers.y,this.eulers.x,0)},PlayerController.prototype.addForwardForce=function(e){var r=this.camera.forward,t=new pc.Vec3,o=r.x*e,a=r.z*e;t.set(o,0,a).normalize().scale(Math.abs(e)),this.entity.rigidbody.applyForce(t)},PlayerController.prototype.addLateralForce=function(e){var r=this.camera.right,t=new pc.Vec3,o=r.x*e,a=r.z*e;t.set(o,0,a).normalize().scale(Math.abs(e)),this.entity.rigidbody.applyForce(t)};var FirstPersonMovement=pc.createScript("firstPersonMovement");FirstPersonMovement.attributes.add("camera",{type:"entity",description:"Optional, assign a camera entity, otherwise one is created"}),FirstPersonMovement.attributes.add("power",{type:"number",default:2500,description:"Adjusts the speed of player movement"}),FirstPersonMovement.attributes.add("lookSpeed",{type:"number",default:.25,description:"Adjusts the sensitivity of looking"}),FirstPersonMovement.attributes.add("leftRight",{type:"entity",description:"Left Right"}),FirstPersonMovement.attributes.add("forwardBack",{type:"entity",description:"Forward Back"}),FirstPersonMovement.prototype.initialize=function(){this.force=new pc.Vec3,this.eulers=new pc.Vec3;var t=this.app;t.mouse.on("mousemove",this._onMouseMove,this),t.mouse.on("mousedown",(function(){t.mouse.enablePointerLock()}),this),this.entity.collision||console.error("First Person Movement script needs to have a 'collision' component"),this.entity.rigidbody&&this.entity.rigidbody.type===pc.BODYTYPE_DYNAMIC||console.error("First Person Movement script needs to have a DYNAMIC 'rigidbody' component"),t.on("input:leftTouchStart",this.onLeftTouchStart,this),t.on("input:rightTouchStart",this.onRightTouchStart,this),t.on("input:leftTouchMove",this.onLeftTouchMove,this),t.on("input:rightTouchMove",this.onRightTouchMove,this),t.on("input:leftTouchEnd",this.onLeftTouchEnd,this),t.on("input:rightTouchEnd",this.onRightTouchEnd,this),this.touchForward=!1,this.touchBackward=!1,this.touchLeft=!1,this.touchRight=!1,this.previousDelta=new pc.Vec2},FirstPersonMovement.prototype.update=function(t){this.camera||this._createCamera();var e=this.force,o=this.app,i=this.camera.forward,s=this.camera.right,r=0,n=0;(o.keyboard.isPressed(pc.KEY_LEFT)||o.keyboard.isPressed(pc.KEY_Q)||this.touchLeft)&&(r-=s.x,n-=s.z),(o.keyboard.isPressed(pc.KEY_RIGHT)||this.touchRight)&&(r+=s.x,n+=s.z),(o.keyboard.isPressed(pc.KEY_UP)||this.touchForward)&&(r+=i.x,n+=i.z),(o.keyboard.isPressed(pc.KEY_DOWN)||this.touchBackward)&&(r-=i.x,n-=i.z),0!==r&&0!==n&&(e.set(r,0,n).normalize().scale(this.power),this.entity.rigidbody.applyForce(e)),this.camera.setLocalEulerAngles(this.eulers.y,this.eulers.x,0)},FirstPersonMovement.prototype._onMouseMove=function(t){(pc.Mouse.isPointerLocked()||t.buttons[0])&&(this.eulers.x-=this.lookSpeed*t.dx,this.eulers.y-=this.lookSpeed*t.dy)},FirstPersonMovement.prototype._createCamera=function(){this.camera=new pc.Entity,this.camera.setName("First Person Camera"),this.camera.addComponent("camera"),this.entity.addChild(this.camera),this.camera.translateLocal(0,.5,0)},FirstPersonMovement.prototype.onLeftTouchStart=function(){},FirstPersonMovement.prototype.onRightTouchStart=function(){this.cameraStartRotation=this.camera.getEulerAngles(),this.leftRight.element.text=Math.round(this.cameraStartRotation.x)+","+Math.round(this.cameraStartRotation.y)+","+Math.round(this.cameraStartRotation.z)},FirstPersonMovement.prototype.onLeftTouchMove=function(t){var e=.1;t.y<-.1&&(this.touchForward=!0,this.touchBackward=!1),t.y>e&&(this.touchForward=!1,this.touchBackward=!0),t.y<e&&t.y>-.1&&(this.touchForward=!1,this.touchBackward=!1),t.x<-.1&&(this.touchLeft=!0,this.touchRight=!1),t.x>e&&(this.touchLeft=!1,this.touchRight=!0),t.x<e&&t.x>-.1&&(this.touchLeft=!1,this.touchRight=!1)},FirstPersonMovement.prototype.onRightTouchMove=function(t){currentDelta=new pc.Vec2(t.x,t.y),currentDelta.sub(this.previousDelta),this.previousDelta=new pc.Vec2(t.x,t.y),this.eulers.x-=currentDelta.x,this.eulers.y-=currentDelta.y},FirstPersonMovement.prototype.onLeftTouchEnd=function(){this.touchForward=!1,this.touchBackward=!1,this.touchLeft=!1,this.touchRight=!1},FirstPersonMovement.prototype.onRightTouchEnd=function(){this.previousDelta=new pc.Vec2(0,0)};var DesktopInput=pc.createScript("desktopInput");DesktopInput.attributes.add("moveSensitivity",{type:"number",default:50,description:"Adjusts the speed of player movement"}),DesktopInput.attributes.add("lookSensitivity",{type:"number",default:.25,description:"Adjusts the sensitivity of looking"}),DesktopInput.prototype.initialize=function(){var e=this.app;e.mouse.on("mousemove",this.onMouseMove,this),e.mouse.on("mousedown",(function(){e.mouse.enablePointerLock()}),this)},DesktopInput.prototype.update=function(e){var t=this.app;t.keyboard.isPressed(pc.KEY_LEFT)&&t.fire("input:addLateralForce",-this.moveSensitivity),t.keyboard.isPressed(pc.KEY_RIGHT)&&t.fire("input:addLateralForce",this.moveSensitivity),t.keyboard.isPressed(pc.KEY_UP)&&t.fire("input:addForwardForce",this.moveSensitivity),t.keyboard.isPressed(pc.KEY_DOWN)&&t.fire("input:addForwardForce",-this.moveSensitivity)},DesktopInput.prototype.onMouseMove=function(e){if(pc.Mouse.isPointerLocked()||e.buttons[0]){var t=new pc.Vec2(this.lookSensitivity*e.dx,this.lookSensitivity*e.dy);this.app.fire("input:setLookDelta",t)}};pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);if(this._add.length){for(let t=0;t<this._add.length;t++)this._tweens.indexOf(this._add[t])>-1||this._tweens.push(this._add[t]);this._add.length=0}}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},_parseProperties=function(t){var i;return t instanceof pc.Vec2?i={x:t.x,y:t.y}:t instanceof pc.Vec3?i={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?i={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(i={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(i.a=t.a)):i=t,i};Tween.prototype={to:function(t,i,e,s,n,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this},from:function(t,i,e,s,n,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,s,n,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,i,e,s;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(i,e,s))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z,void 0!==this._properties.w?(this._fromQuat.copy(this.target),this._toQuat.set(i,e,s,this._properties.w)):(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),this._toQuat.setFromEulerAngles(i,e,s)))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,s,n=0===this.duration?1:this.time/this.duration,r=this.easing(n);for(var h in this._properties)this._properties.hasOwnProperty(h)&&(e=this._sv[h],s=this._ev[h],this.target[h]=e+(s-e)*r);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties){var e=this._sv[i];this._sv[i]=this._ev[i],this._ev[i]=e}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},BounceIn=function(t){return 1-BounceOut(1-t)};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,s=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=s*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*.5+1)}}}()),function(){pc.AppBase.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",(function(t){this._tweenManager.update(t)}))},pc.AppBase.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.once("destroy",e.stop,e),i&&i.element&&(e.element=i.element),e};var t=pc.AppBase.getApplication();t&&t.addTweenManager()}();